{% extends 'base.html.twig' %}

{% block title %}Forum{% endblock %}
{% block metadesc %}Forum HomePage{% endblock %}

{% block pageWrapper %}forum{% endblock %}

{% block body %}


<article id="details-topic-header">
    <div class="topic-header-wrapper">

        <div class="param-btn-container">
            
            <div class="details-topic-info" 
                {{ react_component('components/forum/TopicTag', {category: ''~ topic.showCategory, author: ''~ topic.author.username }) }}
            >
            </div>

            <a href="{{ path('update_topic', {id: topic.id}) }}">
                <strong>
                    EDIT
                </strong>
            </a>

            
            <a href="{{ path('delete_topic', {id: topic.id}) }}" class="delete-btn">
                <strong>
                    DELETE
                </strong>
            </a>

        </div>

        <div class="details-topic-content">
            <h1>{{ topic.title }}</h1>

            <p>{{ topic.msgAuthor }}</p>
        </div>
        
        <a href="{{ path('show_topic', {id:topic.id }) }}">
            <em>MON LIEN</em>
        </a>

    </div>
</article> 

{{ form_start(createMessageForm) }}
    {{ form_errors(createMessageForm) }}
    
    {{ form_row(createMessageForm.text) }}

    <button type="submit" class="form-btn-submit" >Send</button>
{{ form_end(createMessageForm) }}

<section id="details-topic-reponses">
    {% if topic.messages | length > 1 %}
        {% for message in topic.messages %}

        <div class="details-topic-tree">
            <div class="details-topic-msg">
                <p>{{ message.Author }} - <span>{{ message.creationDate | date("F jS \\a\\t g:ia") }}</span> </p>
                <p>{{ message.text }}</p>
            </div>

            {% if message.comments | length > 0 %}
                {% for comment in message.comments %}
                <div class="details-topic-comment">
                    <p>{{ comment.Author }} - <span>{{ comment.creationDate | date("F jS \\a\\t g:ia") }}</span> </p>
                    <p>{{ comment.text }}</p>
                </div>
                {% endfor %}
            {% endif %}

        </div>
        {% endfor %}
    {% endif %}

</section>



{% endblock %}
